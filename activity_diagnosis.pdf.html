<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>活動スタイル診断</title>

<!-- フォント：読みやすさ＋丸フォント（結果で使用） -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#ffffff;
  --text:#243044;
  --muted:#6b7280;
  --pink:#f472b6;
  --pink-strong:#ff6b9a;
  --blue:#60a5fa;
  --card:#fff;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; padding:28px;
  font-family: "Inter", system-ui, -apple-system, "Hiragino Kaku Gothic ProN", "Yu Gothic", Meiryo, sans-serif;
  background: linear-gradient(180deg,#ffffff 0%, #fff7fb 100%);
  color:var(--text);
  display:flex; align-items:center; justify-content:center;
  min-height:100vh;
}

/* watermark I.I.R. (濃めに調整) */
#wmark{
  position:fixed; left:50%; top:16%;
  transform:translateX(-50%);
  font-family: "Zen Maru Gothic", "Great Vibes", cursive;
  font-size:150px; color:rgba(244,114,182,0.08);
  pointer-events:none; user-select:none; z-index:0; letter-spacing:8px;
}

/* container */
.container{
  width:100%; max-width:960px; background:linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.95));
  border-radius:16px; padding:26px; box-shadow: 0 18px 40px rgba(15,23,42,0.06);
  border:1px solid rgba(15,23,42,0.04); position:relative; z-index:1;
}

/* header */
.header{display:flex; gap:16px; align-items:center; margin-bottom:12px}
.logo{
  width:72px; height:72px; border-radius:12px; display:flex; align-items:center; justify-content:center;
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(244,114,182,0.10));
}
.header h1{ margin:0; font-size:22px; color:var(--text)}
.header p{ margin:4px 0 0 0; color:var(--muted); font-size:13px }

/* progress (top) */
.progress-wrap{ margin-top:8px; margin-bottom:14px; display:flex; justify-content:space-between; align-items:center; gap:12px}
.progress-text{ color:var(--muted); font-size:13px }
.progress{ flex:1; height:12px; background:#f3f4f6; border-radius:999px; overflow:hidden; margin-left:12px; margin-right:12px; }
.progress-bar{ height:100%; background:linear-gradient(90deg,var(--pink),var(--blue)); width:0%; transition:width .36s; }

/* card / quiz */
.card{ background:var(--card); padding:18px; border-radius:12px; border:1px solid rgba(15,23,42,0.03); margin-top:8px}
.q-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:10px }
.q-header .page{ color:var(--muted); font-size:13px }
.q-title{ font-size:18px; font-weight:700; margin:0 0 12px 0; color:var(--text) }

/* questions list */
.questions{ display:flex; flex-direction:column; gap:14px; }
.question{ padding:12px; border-radius:10px; background:#fff; border:1px solid rgba(15,23,42,0.02) }
.question p{ margin:0 0 8px 0; font-weight:600; font-size:15px }

/* star scale: star only, no circle */
.scale{ display:flex; justify-content:center; gap:10px; align-items:center; }
.star-btn{
  width:64px; height:64px; display:inline-flex; align-items:center; justify-content:center;
  background:transparent; border:0; padding:0; cursor:pointer; user-select:none;
  transition: transform .12s, filter .12s;
}
.star-btn svg{ width:46px; height:46px; display:block; }
.star-btn:hover{ transform: translateY(-6px) scale(1.05); filter:drop-shadow(0 8px 20px rgba(244,114,182,0.08)); }

/* filled */
.star-btn.filled svg .fill{ opacity:1; }
.star-btn.filled svg .stroke{ opacity:0; }

/* unfilled */
.star-btn svg .fill{ opacity:0; transition:opacity .18s; }
.star-btn svg .stroke{ opacity:1; transition:opacity .18s; stroke:rgba(20,30,40,0.28) }

/* MAX label under rightmost star */
.max-label{ font-size:11px; color:var(--muted); margin-top:6px; text-align:center }

/* controls */
.controls{ display:flex; justify-content:space-between; align-items:center; margin-top:14px; gap:12px }
.btn{ padding:10px 14px; border-radius:999px; font-weight:700; border:0; cursor:pointer }
.btn-outline{ background:transparent; border:1px solid rgba(15,23,42,0.06); color:var(--text) }
.btn-primary{ background:linear-gradient(90deg,var(--pink),var(--blue)); color:#fff; box-shadow:0 8px 20px rgba(99,102,241,0.06) }
.btn-primary[disabled]{ opacity:0.5; cursor:not-allowed }

/* result */
.results{ display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:14px }
.result-card{ padding:14px; border-radius:12px; background:linear-gradient(180deg,#fff,#fbfbff); border:1px solid rgba(15,23,42,0.03) }
.result-card h3{ margin:0 0 8px 0; font-size:16px }
.ichi{ display:inline-block; margin-left:10px; background:linear-gradient(90deg,#ffd1e0,#ffdca3); padding:6px 10px; border-radius:999px; font-weight:800; color:#642033 }

/* recommends */
.recommends{ display:flex; flex-wrap:wrap; gap:8px; margin-top:10px }
.tag{ padding:8px 12px; border-radius:999px; border:1px solid rgba(15,23,42,0.05); background:#fff; font-weight:700 }

/* result big font - rounded */
.results .rounded { font-family: "Zen Maru Gothic", "Inter", sans-serif; }

/* responsive */
@media (max-width:800px){
  .results{ grid-template-columns:1fr; }
  .star-btn{ width:56px; height:56px }
}
</style>
</head>
<body>
  <div id="wmark">I.I.R.</div>

  <div class="container" role="main" aria-labelledby="title">
    <div class="header">
      <div class="logo" aria-hidden="true">
        <!-- simple svg icon -->
        <svg width="48" height="48" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <rect width="64" height="64" rx="12" fill="url(#g)"/>
          <g transform="translate(6,10)" fill="#fff" opacity="0.95"><circle cx="12" cy="12" r="6"/><circle cx="36" cy="14" r="7"/><rect x="4" y="32" rx="4" width="48" height="10"/></g>
          <defs><linearGradient id="g" x1="0" x2="1"><stop offset="0" stop-color="#60A5FA"/><stop offset="1" stop-color="#F472B6"/></linearGradient></defs>
        </svg>
      </div>

      <div>
        <h1 id="title">活動スタイル診断</h1>
        <p>6段階の星で答えて、あなたに合った「次の一歩」を提案します</p>
      </div>
    </div>

    <!-- progress top -->
    <div class="progress-wrap">
      <div class="progress-text" id="progressText">進捗: 0%</div>
      <div class="progress" aria-hidden="true"><div id="progressBar" class="progress-bar" style="width:0%"></div></div>
      <div class="progress-text" id="pageText">ページ: 1 / 3</div>
    </div>

    <!-- quiz area -->
    <div class="card" id="quizCard" aria-live="polite">
      <!-- START screen -->
      <div id="startScreen" style="text-align:center; padding:18px">
        <h2 style="margin:0 0 8px 0">ようこそ！</h2>
        <p style="margin:0 0 14px 0; color:var(--muted)">気軽に参加？英語で交流？キャリア志向？まずは「はじめる」を押してね。</p>
        <button id="startBtn" class="btn btn-primary" aria-label="診断を始める">はじめる</button>
      </div>

      <!-- questions -->
      <div id="questionsArea" style="display:none">
        <div id="questionsList" class="questions"></div>

        <div class="controls">
          <div><button id="prevBtn" class="btn btn-outline" aria-label="前のページへ">前へ</button></div>
          <div><button id="nextBtn" class="btn btn-primary" aria-label="次のページへ">次へ</button></div>
        </div>
      </div>

      <!-- results -->
      <div id="resultArea" style="display:none">
        <h2 style="margin-top:6px">診断結果</h2>
        <p style="color:var(--muted); margin:6px 0 8px 0">あなたのメイン軸と、より詳しい傾向（サブ）を表示します。</p>

        <div id="results" class="results"></div>

        <div style="text-align:center; margin-top:12px">
          <button id="restartBtn" class="btn btn-outline">もう一度診断</button>
        </div>
      </div>
    </div>
  </div>

<script>
document.addEventListener('DOMContentLoaded', ()=>{

  /* QUESTIONS: each question adds points to main axes and sub-axes.
     main keys: community, global, career
     sub keys: rough (ラフ交流), organize (企画運営), explore (探究/国際), practical (実務/キャリア)
     value added = selected star value (1..6)
  */

  const QUESTIONS = [
    { id:1, text:'イベントに気軽にフラッと参加するのが好き', main:['community'], sub:['rough'] },
    { id:2, text:'少人数でゆっくり仲間と話す方が好き', main:['community'], sub:['rough'] },
    { id:3, text:'英語で新しい人と交流するのが楽しい', main:['global'], sub:['explore'] },
    { id:4, text:'テーマを深掘りして討論するのが好き', main:['global'], sub:['explore'] },
    { id:5, text:'将来に役立つ実務経験を得たい', main:['career'], sub:['practical'] },
    { id:6, text:'役職や責任ある立場で挑戦したい', main:['career'], sub:['practical'] },
    { id:7, text:'イベントの企画や運営をやってみたい', main:['community','career'], sub:['organize'] },
    { id:8, text:'プロジェクトで企画をまとめるのが得意', main:['community','career'], sub:['organize'] },
    { id:9, text:'時間があるときにゆるく参加したい', main:['community'], sub:['rough'] },
    { id:10, text:'海外派遣や留学プログラムに積極的に関わりたい', main:['global'], sub:['explore'] },
    { id:11, text:'新しいアイデアを出して形にするのが好き', main:['career','community'], sub:['organize'] },
    { id:12, text:'先輩の経験を聞いてキャリア形成に活かしたい', main:['career'], sub:['practical'] }
  ];

  const TYPE_META = {
    community:{ title:'コミュニティ志向（仲間重視）', desc:'仲間づくりや同期会など、つながりを重視するタイプ。', actions:['同期会に参加','定期イベント','PJに応募']},
    global:{ title:'英語・交流志向（国際）', desc:'英語や国際交流を楽しみたいタイプ。海外派遣や交流イベントが合います。', actions:['交流イベント','海外派遣','英語ワークショップ']},
    career:{ title:'キャリア志向（実務・挑戦）', desc:'実務経験や役職で成長したいタイプ。役員や副リーダーが向いています。', actions:['役員応募','キャリ活参加','副リーダー枠']}
  };

  const SUB_META = {
    rough:{ title:'ラフ・交流タイプ', desc:'気軽に参加してみんなとワイワイ楽しみたい傾向です。' },
    organize:{ title:'企画・運営タイプ', desc:'企画や運営で場をつくることに向いています。' },
    explore:{ title:'探究・国際タイプ', desc:'議論や国際テーマに興味があり、深く関わるのが得意です。' },
    practical:{ title:'実務・キャリアタイプ', desc:'実務経験や役職を通じて成長したい傾向です。' }
  };

  const pageSize = 4;
  const totalPages = Math.ceil(QUESTIONS.length / pageSize);

  // state
  let page = 0;
  let answers = {}; // qid -> 1..6

  // DOM
  const startBtn = document.getElementById('startBtn');
  const startScreen = document.getElementById('startScreen');
  const questionsArea = document.getElementById('questionsArea');
  const questionsList = document.getElementById('questionsList');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const progressBar = document.getElementById('progressBar');
  const progressText = document.getElementById('progressText');
  const pageText = document.getElementById('pageText');
  const resultArea = document.getElementById('resultArea');
  const resultsDiv = document.getElementById('results');
  const restartBtn = document.getElementById('restartBtn');

  function updateOverallProgress(){
    const answeredCount = Object.keys(answers).length;
    const percent = Math.round((answeredCount / QUESTIONS.length) * 100);
    progressBar.style.width = percent + '%';
    progressText.textContent = `進捗: ${percent}% (${answeredCount}/${QUESTIONS.length})`;
  }

  function renderPage(){
    questionsList.innerHTML = '';
    const start = page * pageSize;
    const slice = QUESTIONS.slice(start, start + pageSize);
    slice.forEach((q, idx)=>{
      const qBox = document.createElement('div');
      qBox.className = 'question';
      const qnum = start + idx + 1;
      const p = document.createElement('p');
      p.textContent = `${qnum}. ${q.text}`;
      qBox.appendChild(p);

      // scale
      const scaleWrap = document.createElement('div');
      scaleWrap.className = 'scale';

      for(let s=1;s<=6;s++){
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'star-btn';
        btn.setAttribute('data-qid', q.id);
        btn.setAttribute('data-val', s);
        // insert star svg; filled if answers[q.id] == s
        btn.innerHTML = starSVG(s, answers[q.id] === s);
        // if rightmost, wrap with MAX label
        if(s===6){
          const vwrap = document.createElement('div');
          vwrap.style.display = 'flex';
          vwrap.style.flexDirection = 'column';
          vwrap.style.alignItems = 'center';
          vwrap.appendChild(btn);
          const lbl = document.createElement('div');
          lbl.className = 'max-label';
          lbl.textContent = 'MAX';
          vwrap.appendChild(lbl);
          scaleWrap.appendChild(vwrap);
        } else {
          scaleWrap.appendChild(btn);
        }

        btn.addEventListener('click', ()=>{
          const qid = Number(btn.getAttribute('data-qid'));
          const val = Number(btn.getAttribute('data-val'));
          // set answer to this val (single-star selection)
          answers[qid] = val;
          // update visuals in this scale: only this star filled
          const siblings = scaleWrap.querySelectorAll('button.star-btn');
          siblings.forEach(sbtn=>{
            const v = Number(sbtn.getAttribute('data-val'));
            sbtn.innerHTML = starSVG(v, v === val);
            if(v === val) sbtn.classList.add('filled'); else sbtn.classList.remove('filled');
          });
          updateOverallProgress();
          updateNextButton();
        });

        // restore filled class if selected
        if(answers[q.id] === s) btn.classList.add('filled');

      } // end stars

      qBox.appendChild(scaleWrap);
      questionsList.appendChild(qBox);
    });

    // page text and buttons
    pageText.textContent = `ページ: ${page + 1} / ${totalPages}`;
    prevBtn.disabled = page === 0;
    // next btn controlled by updateNextButton
    updateNextButton();
  }

  // show result page
  function showResult(){
    // aggregate
    const mainScores = { community:0, global:0, career:0 };
    const subScores = { rough:0, organize:0, explore:0, practical:0 };
    Object.keys(answers).forEach(qid=>{
      const q = QUESTIONS.find(x=>x.id === Number(qid));
      if(!q) return;
      const val = Number(answers[qid]);
      q.main.forEach(m => { mainScores[m] += val; });
      q.sub.forEach(s => { subScores[s] += val; });
    });

    // find top main and second
    const mainSorted = Object.entries(mainScores).sort((a,b)=>b[1]-a[1]);
    const subSorted = Object.entries(subScores).sort((a,b)=>b[1]-a[1]);

    const topMainKey = mainSorted[0][0];
    const topMainScore = mainSorted[0][1];
    const secondMainKey = mainSorted[1][0];
    const topSubKey = subSorted[0][0];

    // build results
    resultsDiv.innerHTML = '';

    // main top card (イチオシ)
    const topCard = document.createElement('div');
    topCard.className = 'result-card results-rounded';
    const h1 = document.createElement('h3');
    h1.textContent = TYPE_META[topMainKey].title;
    const ichi = document.createElement('span');
    ichi.className = 'ichi';
    ichi.textContent = 'イチオシ！';
    h1.appendChild(ichi);
    const p1 = document.createElement('p');
    p1.textContent = TYPE_META[topMainKey].desc + `（スコア: ${topMainScore}）`;
    // recommendations
    const recWrap = document.createElement('div');
    recWrap.className = 'recommends';
    TYPE_META[topMainKey].actions.forEach(a=>{
      const t = document.createElement('div'); t.className = 'tag'; t.textContent = a; recWrap.appendChild(t);
    });

    topCard.appendChild(h1);
    topCard.appendChild(p1);
    topCard.appendChild(recWrap);

    // second main
    const secondCard = document.createElement('div'); secondCard.className = 'result-card';
    const h2 = document.createElement('h3'); h2.textContent = TYPE_META[secondMainKey].title;
    const p2 = document.createElement('p'); p2.textContent = TYPE_META[secondMainKey].desc + `（スコア: ${mainSorted[1][1]}）`;
    secondCard.appendChild(h2); secondCard.appendChild(p2);
    // add recommends for second
    const rec2 = document.createElement('div'); rec2.className='recommends';
    TYPE_META[secondMainKey].actions.forEach(a=>{ const t=document.createElement('div');t.className='tag';t.textContent=a;rec2.appendChild(t); });
    secondCard.appendChild(rec2);

    // sub-type card (highlight user's sub tendency)
    const subCard = document.createElement('div'); subCard.className='result-card';
    const h3 = document.createElement('h3'); h3.textContent = SUB_META[topSubKey].title;
    const p3 = document.createElement('p'); p3.textContent = SUB_META[topSubKey].desc + `（サブスコア: ${subSorted[0][1]}）`;
    subCard.appendChild(h3); subCard.appendChild(p3);

    // also show all main scores for transparency
    const allCard = document.createElement('div'); allCard.className='result-card';
    const h4 = document.createElement('h3'); h4.textContent = 'すべてのスコア';
    allCard.appendChild(h4);
    const ul = document.createElement('ul');
    ul.style.paddingLeft = '18px';
    Object.entries(mainScores).forEach(([k,v])=>{
      const li = document.createElement('li'); li.textContent = `${TYPE_META[k].title} : ${v}`; ul.appendChild(li);
    });
    allCard.appendChild(ul);

    // layout: top two columns: topCard + secondCard, below subCard + allCard
    resultsDiv.appendChild(topCard);
    resultsDiv.appendChild(secondCard);
    resultsDiv.appendChild(subCard);
    resultsDiv.appendChild(allCard);

    // show result area
    document.getElementById('startScreen').style.display = 'none';
    document.getElementById('questionsArea').style.display = 'none';
    resultArea.style.display = 'block';
  }

  // star SVG generator (hand-drawn-ish, filled/unfilled)
  function starSVG(val, filled){
    // simple rounded star path with gradient fill
    if(filled){
      return `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <defs>
          <linearGradient id="g${val}" x1="0" x2="1"><stop offset="0" stop-color="#ffd1e0"/><stop offset="1" stop-color="#ff9cc0"/></linearGradient>
        </defs>
        <path class="fill" d="M12 2.2c.3 0 .6.1.85.3l1.7 1.6 1.76.2c.68.08.95.9.45 1.36l-1.3 1.12.35 1.8c.1.53-.45.94-.9.68L12 9.7l-1.5.82c-.45.24-1-.15-.9-.68l.35-1.8-1.3-1.12c-.5-.46-.23-1.28.45-1.36l1.76-.2 1.7-1.6c.25-.2.54-.3.85-.3z" fill="url(#g${val})"/>
      </svg>`;
    } else {
      return `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path class="stroke" d="M12 2.2c.3 0 .6.1.85.3l1.7 1.6 1.76.2c.68.08.95.9.45 1.36l-1.3 1.12.35 1.8c.1.53-.45.94-.9.68L12 9.7l-1.5.82c-.45.24-1-.15-.9-.68l.35-1.8-1.3-1.12c-.5-.46-.23-1.28.45-1.36l1.76-.2 1.7-1.6c.25-.2.54-.3.85-.3z" fill="none" stroke="rgba(20,30,40,0.28)" stroke-width="1.1" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>`;
    }
  }

  // update next button enabled only if all on page answered
  function updateNextButton(){
    const start = page * pageSize;
    const slice = QUESTIONS.slice(start, start + pageSize);
    const allAnswered = slice.every(q=> answers[q.id] !== undefined);
    nextBtn.disabled = !allAnswered;
  }

  // navigation
  startBtn.addEventListener('click', ()=>{
    startScreen.style.display = 'none';
    document.getElementById('questionsArea').style.display = 'block';
    renderPage();
    updateOverallProgress();
    window.scrollTo({top:0, behavior:'smooth'});
  });

  prevBtn.addEventListener('click', ()=>{
    if(page > 0){
      page--;
      renderPage();
      updateOverallProgress();
      window.scrollTo({top:0, behavior:'smooth'});
    }
  });

  nextBtn.addEventListener('click', ()=>{
    const start = page * pageSize;
    const slice = QUESTIONS.slice(start, start + pageSize);
    if(!slice.every(q=> answers[q.id] !== undefined)){
      alert('このページの全ての質問に回答してください。');
      return;
    }
    if(page < totalPages - 1){
      page++;
      renderPage();
      updateOverallProgress();
      window.scrollTo({top:0, behavior:'smooth'});
    } else {
      showResult();
      window.scrollTo({top:0, behavior:'smooth'});
    }
  });

  restartBtn.addEventListener('click', ()=>{
    answers = {};
    page = 0;
    document.getElementById('startScreen').style.display = 'block';
    document.getElementById('questionsArea').style.display = 'none';
    resultArea.style.display = 'none';
    progressBar.style.width = '0%';
    progressText.textContent = '進捗: 0% (0/12)';
  });

  // initial state
  document.getElementById('questionsArea').style.display = 'none';
  resultArea.style.display = 'none';
  updateOverallProgress();

}); // DOMContentLoaded end
</script>
</body>
</html>
